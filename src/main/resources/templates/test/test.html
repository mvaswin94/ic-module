<html xmlns:th="https://www.thymeleaf.org" style="overflow-x: hidden;">
<div th:replace="/fragment/Head.html::Head"></div>
<body class="theme-red ls-closed">

	<div class="overlay"></div>

	<div th:replace="/fragment/Header.html::Header"></div>

	<section>

		<div th:replace="/fragment/Sidenav.html::SideNav"></div>

		<section class="content">

			<div th:replace="/fragment/SearchIc.html::IcSearch"></div>


			<div class="row clearfix">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="card" style="bottom: 2pc;">
						<div class="header">
							<h2>
								<b>DISPATCH IC</b>
							</h2>


						</div>
						<div class="body">
							<div class="table-responsive">
								<table id="example"
									class="table table-bordered table-striped table-hover dataTable js-exportable"
									style="font-size: smaller; width: max-content">
									<thead>
										<tr role="row">

											<th class="sorting_asc" tabindex="0"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-sort="ascending"
												aria-label="Name: activate to sort column descending">COVER
												ID</th>
											<th class="sorting_asc" tabindex="0"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-sort="ascending"
												aria-label="Name: activate to sort column descending">IC
												ID</th>
											<th class="sorting" tabindex="4"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">CLIENT
												ID</th>
											<th class="sorting" tabindex="5"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">CLIENT
												NAME</th>
											<th class="sorting" tabindex="7"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Salary: activate to sort column ascending">PRO
												ID</th>
											<th class="sorting" tabindex="9"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">PRO
												NAME</th> 
											<th class="sorting" tabindex="9"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">IC
												AMOUNT</th>	
										</tr>
									</thead>
									<tbody>

										<tr role="row" th:each="obj : ${coverIcList}" class="odd">
											
											<td class="sorting_1" th:text="${obj.coverId}" id="coverId"
												th:attr="data-coid=${obj.coverId}">	
												</td>
											<td class="sorting_1" th:text="${obj.ic.icId}" id="icId"
												th:attr="data-cid=${obj.ic.icId}"></td>
													
										   <!--  <td class="sorting_1" th:text="${obj.ic.clientId}" id="clientId"
												th:attr="data-cid=${obj.ic.clientId}"></td>
											
											<td class="sorting_1" th:text="${obj.ic.proId}" id="proId"
												th:attr="data-cid=${obj.ic.proId}"></td> -->
												
											<td class="sorting_1" th:text="${obj.ic.approvedAmount}" id="approvedAmount"
												th:attr="data-cid=${obj.ic.approvedAmount}"></td>	
</tr>
</tbody>
</table>
													

								<!-- ---------------------------------COVER IC---------------------------------------------------------------------- -->

								<div id="cover" class="modal fade" style="overflow: hidden;">
									<div class="modal-dialog">
										<div class="modal-content">
												<div class="modal-header">
													<h4 class="modal-title">IC LIST</h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-hidden="true">&times;</button>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">

																<label>Cover ID:</label> <input type="text"
																	th:name="coverId" id="icoId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
													</div>
													<!-- <div class="row"> -->
														<div class="table-responsive">
								<table id="example"
									class="table table-bordered table-striped table-hover dataTable js-exportable"
									style="font-size: smaller; width: max-content">
									<thead>
										<tr role="row">

											<th class="sorting_asc" tabindex="0"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-sort="ascending"
												aria-label="Name: activate to sort column descending">COVER
												ID</th>
											<th class="sorting_asc" tabindex="0"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-sort="ascending"
												aria-label="Name: activate to sort column descending">IC
												ID</th>
											<!-- <th class="sorting" tabindex="4"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">CLIENT
												ID</th>
											<th class="sorting" tabindex="5"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">CLIENT
												NAME</th>
											<th class="sorting" tabindex="6"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">CLIENT
												TYPE</th>
											<th class="sorting" tabindex="7"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Salary: activate to sort column ascending">PRO
												ID</th>
											<th class="sorting" tabindex="9"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">PRO
												NAME</th> -->
											<th class="sorting" tabindex="9"
												aria-controls="DataTables_Table_1" rowspan="1" colspan="1"
												aria-label="Position: activate to sort column ascending">IC
												AMOUNT</th>	
										</tr>
									</thead>
									<tbody>

										<tr role="row" th:each="obj : ${coverIcList}" class="odd">
											
											<td class="sorting_1" th:text="${obj.coverId}" id="coverId"
												th:attr="data-coid=${obj.coverId}">	
												</td>
											<td class="sorting_1" th:text="${obj.ic.icId}" id="icId"
												th:attr="data-cid=${obj.ic.icId}"></td>
													
										   <!--  <td class="sorting_1" th:text="${obj.ic.clientId}" id="clientId"
												th:attr="data-cid=${obj.ic.clientId}"></td>
											
											<td class="sorting_1" th:text="${obj.ic.proId}" id="proId"
												th:attr="data-cid=${obj.ic.proId}"></td> -->
												
											<td class="sorting_1" th:text="${obj.ic.approvedAmount}" id="approvedAmount"
												th:attr="data-cid=${obj.ic.approvedAmount}"></td>	
</tr>
</tbody>
</table>
													</div>
												</div>
										</div>
									</div>
								</div>




								<!-- --------------------------------*COVER IC*---------------------------------------------------------------------- -->
								<!-- --------------------------------DISPATCH IC---------------------------------------------------------------------- -->

								<div id="approved" class="modal fade" style="overflow: hidden;">
									<div class="modal-dialog">
										<div class="modal-content">
											<form th:action="@{/ic/dispatch/send}" method="POST">
												<div class="modal-header">
													<h4 class="modal-title">Dispatch IC</h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-hidden="true">&times;</button>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">

																<label>Cover Id:</label> <input type="text"
																	th:name="coverId" id="coId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group">
																<label>Client Name:</label> <input type="text"
																	th:name="clientName" id="clName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

													</div>
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">
																<label>PRO ID:</label> <input type="text"
																	th:name="proId" id="pId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group">
																<label>PRO Name:</label> <input type="text"
																	th:name="proName" id="pName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>


														<div class="col-md-4">
															<div class="input-daterange input-group"
																th:name="deleveryDate" data-provide="datepicker">
																<div class="form-line">
																	<label>Date of Return:</label> <input type="text"
																		name="toDate" id="toDate" class="form-control"
																		autocomplete="off" required>
																</div>
															</div>
														</div>
													</div>


												</div>
												<div class="modal-footer">
													<input type="button" class="btn btn-default"
														data-dismiss="modal" value="Cancel"> <input
														type="submit" class="btn btn-info" value="Save">
												</div>
											</form>
										</div>
									</div>
								</div>



								<!-- -------------------------------------------------------------------------------------------------------------------------------- -->
								<!-- --------------------------------DISPATCHED IC DONE/SUCCESS---------------------------------------------------------------------- -->

								<div id="dispatched" class="modal fade"
									style="overflow: hidden;">
									<div class="modal-dialog">
										<div class="modal-content">
											<form th:action="@{/ic/dispatch/success}" method="POST">
												<div class="modal-header">
													<h4 class="modal-title">Dispatch IC Successful</h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-hidden="true">&times;</button>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">

																<label>Cover Id:</label> <input type="text"
																	th:name="coverId" id="scoId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group">
																<label>Client Name:</label> <input type="text"
																	th:name="clientName" id="sclName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
													</div>

													<div class="row">
														<div class="col-md-4">
															<div class="form-group">
																<label>PRO ID:</label> <input type="text"
																	th:name="proId" id="spId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group">
																<label>PRO Name:</label> <input type="text"
																	th:name="proName" id="spName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

													</div>

												</div>
												<div class="modal-footer">
													<input type="button" class="btn btn-default"
														data-dismiss="modal" value="Cancel"> <input
														type="submit" class="btn btn-info" value="Save">
												</div>
											</form>
										</div>
									</div>
								</div>


								<!-- ------------------------------------------------------------------------------------------------------ -->
								<!-- ------------------------------------------RETURN IC--------------------------------------------------- -->

								<div id="return" class="modal fade" style="overflow: hidden;">
									<div class="modal-dialog">
										<div class="modal-content">
											<form th:action="@{/ic/dispatch/return}" method="POST">
												<div class="modal-header">
													<h4 class="modal-title">Return IC</h4>
													<button type="button" class="close" data-dismiss="modal"
														aria-hidden="true">&times;</button>
												</div>
												<div class="modal-body">
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">

																<label>Cover Id:</label> <input type="text"
																	th:name="coverId" id="rcoId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group">
																<label>Client Name:</label> <input type="text"
																	th:name="clientName" id="rclName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

													</div>

													<div class="row">
														<div class="col-md-4">
															<div class="form-group">
																<label>PRO ID:</label> <input type="text"
																	th:name="proId" id="rpId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>


														<div class="col-md-4">
															<div class="form-group">
																<label>PRO Name:</label> <input type="text"
																	th:name="proName" id="rpName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

														<div class="col-md-4">
															<div class="input-daterange input-group"
																th:name="deleveryDate" data-provide="datepicker">
																<div class="form-line">
																	<label>Date of Return:</label> <input type="text"
																		name="toDate" id="toDate" class="form-control"
																		autocomplete="off" required>
																</div>
															</div>
														</div>
													</div>
													<div class="row">
														<div class="col-md-4">
															<div class="form-group">
																<label for="comment">Remarks:</label>
																<textarea th:name="reason" class="form-control" rows="5"
																	id="comment"
																	style="max-width: 100%; margin: 0px; height: 34px; width: 500px;"
																	placeholder="Type Remarks..."></textarea>
															</div>

														</div>
													</div>


												</div>
												<div class="modal-footer">
													<input type="button" class="btn btn-default"
														data-dismiss="modal" value="Cancel"> <input
														type="submit" class="btn btn-info" value="Save">
												</div>
											</form>
										</div>

									</div>



									<!-- ------------------------------------------------------------------------------------------------------ -->
									<!-- -----------------------------------------RE_DISPATCH IC----------------------------------------------- -->

									<div id="redispatch" class="modal fade"
										style="overflow: hidden;">
										<div class="modal-dialog">
											<div class="modal-content">
												<form th:action="@{/ic/dispatch/redispatch}" method="POST">
													<div class="modal-header">
														<h4 class="modal-title">Re-Dispatch IC</h4>
														<button type="button" class="close" data-dismiss="modal"
															aria-hidden="true">&times;</button>
													</div>
													<div class="modal-body">

														<div class="col-md-4">
															<div class="form-group">

																<label>Cover Id:</label> <input type="text"
																	th:name="coverId" id="rdcoId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>
														<div class="col-md-4">
															<div class="form-group">
																<label>Client Name:</label> <input type="text"
																	th:name="clientName" id="rdclName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group">
																<label>Date of Re-Dispatch:</label> <input type="date"
																	th:name="date" id="date" class="form-control"
																	autocomplete="off" required>
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group">
																<label>PRO Name:</label> <input type="text"
																	th:name="proName" id="rdpName" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>

														<div class="col-md-4">
															<div class="form-group">
																<label>PRO ID:</label> <input type="text"
																	th:name="proId" id="rdpId" class="form-control"
																	style="font-weight: bolder;" readonly>
															</div>
														</div>




													</div>
													<div class="modal-footer" style="top: 4pc; right: 2pc;">
														<input type="button" class="btn btn-default"
															data-dismiss="modal" value="Cancel"> <input
															type="submit" class="btn btn-info" value="Save">
													</div>
												</form>
											</div>
										</div>
									</div>
									<!-- ------------------------------------------------------------------------------------------------------ -->
									<!-- ------------------------------------------------------------------------------------------------------ -->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</section>

	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

	<script src="/plugins/jquery-datatable/jquery.dataTables.js"></script>
	<script
		src="/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
	<script
		src="/plugins/jquery-datatable/extensions/export/dataTables.buttons.min.js"></script>
	<script
		src="/plugins/jquery-datatable/extensions/export/buttons.flash.min.js"></script>
	<script src="/plugins/jquery-datatable/extensions/export/jszip.min.js"></script>
	<script
		src="/plugins/jquery-datatable/extensions/export/pdfmake.min.js"></script>
	<script src="/plugins/jquery-datatable/extensions/export/vfs_fonts.js"></script>
	<script
		src="/plugins/jquery-datatable/extensions/export/buttons.html5.min.js"></script>
	<script
		src="/plugins/jquery-datatable/extensions/export/buttons.print.min.js"></script>

	<!--  Bootstrap Material Datetime Picker Plugin Js -->
	<script
		src="../../plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js"></script>

	<!--      Bootstrap Datepicker Plugin Js -->
	<script
		src="../../plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<!-- noUISlider Plugin Js -->
	<script src="/plugins/nouislider/nouislider.js"></script>

	<!-- Waves Effect Plugin Js -->
	<script src="/plugins/node-waves/waves.js"></script>
	<!-- Custom Js -->
	<script src="/js/admin.js"></script>
	<script src="/js/pages/tables/jquery-datatable.js"></script>

	<!--  Demo Js -->
	<script src="/js/demo.js"></script>

	<SCRIPT language="javascript">
		$(function() {

			// add multiple select / deselect functionality
			$("#selectall").click(function() {
				$('.case').attr('checked', this.checked);
			});

			// if all checkbox are selected, check the selectall checkbox
			// and viceversa
			$(".case").click(function() {

				if ($(".case").length == $(".case:checked").length) {
					$("#selectall").attr("checked", "checked");
				} else {
					$("#selectall").removeAttr("checked");
				}

			});
		});
	</SCRIPT>
	<script>
	function coverId(ele) {
		var row = $(ele).closest('tr');
		var tds = $(row).find('td');

		var one = $(row).find('td[data-coid]').data('coid');
		var b = $('#icoId').val(one);

		$('#cover').modal('show');

	}
		function approvedIc(ele) {
			var row = $(ele).closest('tr');
			var tds = $(row).find('td');

			var one = $(row).find('td[data-coid]').data('coid');
			var two = $(row).find('td[data-cid]').data('cid');
			var three = $(row).find('td[data-cname]').data('cname');
			var four = $(row).find('td[data-prid]').data('prid');
			var five = $(row).find('td[data-prname]').data('prname');

			var b = $('#coId').val(one);
			var b = $('#clId').val(two);
			var b = $('#clName').val(three);
			var b = $('#pId').val(four);
			var b = $('#pName').val(five);
			$('#approved').modal('show');
		}
		function returnIc(ele) {
			var row = $(ele).closest('tr');
			var tds = $(row).find('td');

			var one = $(row).find('td[data-coid]').data('coid');
			var two = $(row).find('td[data-cid]').data('cid');
			var three = $(row).find('td[data-cname]').data('cname');
			var four = $(row).find('td[data-prid]').data('prid');
			var five = $(row).find('td[data-prname]').data('prname');

			var b = $('#rcoId').val(one);
			var b = $('#rclId').val(two);
			var b = $('#rclName').val(three);
			var b = $('#rpId').val(four);
			var b = $('#rpName').val(five);
			$('#return').modal('show');

		}
		function dispatchedIc(ele) {
			var row = $(ele).closest('tr');
			var tds = $(row).find('td');

			var one = $(row).find('td[data-coid]').data('coid');
			var two = $(row).find('td[data-cid]').data('cid');
			var three = $(row).find('td[data-cname]').data('cname');
			var four = $(row).find('td[data-prid]').data('prid');
			var five = $(row).find('td[data-prname]').data('prname');

			var b = $('#scoId').val(one);
			var b = $('#sclId').val(two);
			var b = $('#sclName').val(three);
			var b = $('#spId').val(four);
			var b = $('#spName').val(five);
			$('#dispatched').modal('show');

		}

		function redispatch(ele) {
			var row = $(ele).closest('tr');
			var tds = $(row).find('td');

			var one = $(row).find('td[data-coid]').data('coid');
			var two = $(row).find('td[data-cid]').data('cid');
			var three = $(row).find('td[data-cname]').data('cname');
			var four = $(row).find('td[data-prid]').data('prid');
			var five = $(row).find('td[data-prname]').data('prname');

			var b = $('#rdcoId').val(one);
			var b = $('#rdclId').val(two);
			var b = $('#rdclName').val(three);
			var b = $('#rdpId').val(four);
			var b = $('#rdpName').val(five);
			$('#redispatch').modal('show');

		}
	</script>

	<style>
.modal-header .close {
	margin-top: -2px;
	position: relative;
	bottom: 20px;
}

.modal .modal-footer {
	border: none;
	position: relative;
}
</style>

	<script type="text/javascript">
		$(".form_datetime").datetimepicker({
			format : "dd-mm-yyyy - hh:ii"
		});
	</script>
	<script>
		$(document).ready(
				function() {
					var date_input = $('input[name="fromDate"]'); //our date input has the name "date"
					var container = $('.bootstrap-iso form').length > 0 ? $(
							'.bootstrap-iso form').parent() : "body";
					var options = {
						format : 'dd-mm-yyyy',
						container : container,
						todayHighlight : true,
						autoclose : true,
					};
					date_input.datepicker("setDate", "0");
				})

		$(document).ready(
				function() {
					var date_input = $('input[name="toDate"]'); //our date input has the name "date"
					var container = $('.bootstrap-iso form').length > 0 ? $(
							'.bootstrap-iso form').parent() : "body";
					var options = {
						format : 'dd-mm-yyyy',
						container : container,
						todayHighlight : true,
						autoclose : true,
					};
					date_input.datepicker("setDate", "0");
				})
	</script>
<script> 
function getData(e){
var entity= $('#coverId').val();
$.ajax({
             url: '/cust/stock/'+entity,
             dataType: 'Json',
             type: 'POST',
             //contentType: 'application/json',
             data: {
         "entity":entity,
         "hierachy":$('#itemHiearchy').val(),
         "groupc":$('#itemGroup').val(),
         "brandc":$('#brand').val(),
         "modelc":$('#model').val(),
         "itemc":$('#item').val()
      

             },
             success: function( data, textStatus, jQxhr ){
          
            var trs = "";
                 data.forEach(function(v){
                 trs +=`<tr><td>${v.ItemCode}</td>
                 <td class='.text-right'>${showEmptyOnNull (v.Item_Hiearchy)}</td>
                 <td>${showEmptyOnNull(v.ItmsGrpNam)}</td>
                 <td class='.text-right'>${showEmptyOnNull(v.Brand)}</td>
                 <td class='.text-right'>${showEmptyOnNull(v.Model)}</td>
                 <td class='.text-right'>${showEmptyOnNull(v.ItemName)}</td>
                 <td class='.text-right'>${showEmptyOnNull(v.Total_Days.toFixed())}</td>
                 </tr>`;
                 });
                 $('#example tbody').html(trs);
               
             },
             error: function( jqXhr, textStatus, errorThrown ){
                 console.log( errorThrown );
             }
         });

}

function showEmptyOnNull(value){
if(value == null){
return "";
} else{
return (value.toString().replace(/\B(?=(\d{3})+(?!\d))/g , ","));
}
}
</script>
	
</body>
</html>
